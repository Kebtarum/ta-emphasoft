(this["webpackJsonptz-emphasoft"]=this["webpackJsonptz-emphasoft"]||[]).push([[0],{113:function(e,t,n){e.exports=n(240)},118:function(e,t,n){},119:function(e,t,n){},239:function(e,t){},240:function(e,t,n){"use strict";n.r(t);var r,a=n(0),s=n.n(a),o=n(47),c=n.n(o),u=(n(118),n(49)),i=n(50),l=n(53),m=n(52),p=(n(119),n(6)),f=n(48),d=n(112),h=n(242),v=n(241),E=n(18),U=n.n(E),b=n(30),g=n(19),_=n(108),C={allUsers:[],currentUsers:[]},O=function(e){return function(){var t=Object(b.a)(U.a.mark((function t(n){return U.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,x.getUserInfo(e);case 3:t.sent;case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},k=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET-USERS":return Object(g.a)(Object(g.a)({},e),{},{allUsers:t.users,currentUsers:t.users});case"CURRENT-USERS":return Object(g.a)(Object(g.a)({},e),{},{currentUsers:t.currentUsers});default:return e}},w=_.create({baseURL:"https://emphasoft-test-assignment.herokuapp.com"}),j=function(e,t){return w.post("/api-token-auth/",{username:e,password:t},{headers:{"Content-Type":"application/json"}}).then((function(e){return e.data}))},x={getUsers:function(e){return w.get("/api/v1/users/",{headers:{Authorization:"token ".concat(e)}}).then((function(e){return e.data}))}},N={savedToken:null,isAuth:!1},S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"AUTH-SUCCESS":return Object(g.a)(Object(g.a)({},e),{},{savedToken:t.token,isAuth:!0});case"LOGOUT":return Object(g.a)(Object(g.a)({},e),{},{savedToken:null,isAuth:!1});default:return e}},y=n(15),T=n(37),A=n.n(T),L=n(23),R=n.n(L),I=function(e){if(!e)return"Field is required"},B=(r=50,function(e){if(e.length>r)return"Max length is ".concat(r," symbols")}),M=function(e){var t=e.input,n=e.meta,r=Object(d.a)(e,["input","meta"]),a=n.touched&&n.error;return s.a.createElement("div",null,s.a.createElement("input",Object.assign({},t,{placeholder:r.name,className:"form-control"})),a&&s.a.createElement("span",{className:A.a.errorSpan},n.error))},P=Object(v.a)({form:"/login"})((function(e){var t=e.handleSubmit;return s.a.createElement("form",{onSubmit:t},s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{for:"username"},"Username"),s.a.createElement(h.a,{component:M,name:"username",placeholder:"username",validate:[I,B]})),s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{for:"password"},"Username"),s.a.createElement(h.a,{component:M,name:"password",placeholder:"password",className:"form-control",validate:[I,B]})),s.a.createElement("div",null,s.a.createElement("button",{className:"btn btn-primary"},"Login")))})),W=Object(y.b)((function(e){return{isAuth:e.auth.isAuth}}),{giveToken:function(e,t){return function(){var n=Object(b.a)(U.a.mark((function n(r){var a;return U.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,j(e,t);case 2:(a=n.sent).token&&r({type:"AUTH-SUCCESS",token:a.token});case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}})((function(e){return e.isAuth?s.a.createElement(p.a,{to:"/users"}):s.a.createElement("div",{className:R()("container",A.a.loginContainer)},s.a.createElement("div",{className:R()("text-center",A.a.marginContainer)},s.a.createElement("h2",null,"\u0422\u0435\u0441\u0442\u043e\u0432\u043e\u0435 \u0437\u0430\u0434\u0430\u043d\u0438\u0435")),s.a.createElement("div",{className:A.a.marginContainer},s.a.createElement("div",null,s.a.createElement("span",null,"\u0414\u043b\u044f \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u0438 \u0432\u0432\u0435\u0434\u0438\u0442\u0435 \u0434\u0430\u043d\u043d\u044b\u0435 \u0443\u043a\u0430\u0437\u0430\u043d\u043d\u044b\u0435 \u043d\u0438\u0436\u0435")),s.a.createElement("div",null,s.a.createElement("span",null,"Username: ",s.a.createElement("b",null,"test_super"))),s.a.createElement("div",null,s.a.createElement("span",null,"Password: ",s.a.createElement("b",null,"Nf<U4f<rDbtDxAPn")))),s.a.createElement("div",null,s.a.createElement(P,{onSubmit:function(t){e.giveToken(t.username,t.password).catch((function(e){return alert("Error")}))}})))})),z=n(243),D=n(111),F=n(7),H=F.combineReducers,J=F.createStore,G=F.applyMiddleware,q=J(H({auth:S,usersPage:k,form:z.a}),G(D.a));window.__store__=q;var X=q,$=n(77),K=n.n($);n(239);var Q=function(e){return s.a.createElement("li",{className:R()("list-group-item")},s.a.createElement("div",{className:K.a.flexContainer},s.a.createElement("div",null,s.a.createElement("span",{className:K.a.idRound},"id ".concat(e.user.id)))),s.a.createElement("div",null,s.a.createElement("b",null,"Username: ",e.user.username)),s.a.createElement("div",null,"First name: ",e.user.first_name),s.a.createElement("div",null,"Last name: ",e.user.last_name))},V=n(38),Y=n.n(V);var Z=function(e){return s.a.createElement("div",{className:R()("container",Y.a.usersContainer)},s.a.createElement("div",{className:R()(Y.a.flexContainer,Y.a.marginContainer)},s.a.createElement("div",null,s.a.createElement("h2",null,"Users")),s.a.createElement("div",{className:Y.a.flexChild},s.a.createElement("button",{onClick:function(){e.logout()},className:"btn btn-primary"},"Logout"))),s.a.createElement("div",{className:"form-group"},s.a.createElement("input",{type:"text",onInput:function(t){var n=e.allUsers.filter((function(e){return e.username.toLowerCase().indexOf(t.currentTarget.value.toLowerCase())>-1}));e.filterList(n)},className:"form-control"})),s.a.createElement("ul",{className:"list-group"},e.currentUsers.map((function(t){return s.a.createElement(Q,{user:t,key:t.id,saveUserInfo:e.saveUserInfo,savedToken:e.savedToken})}))))},ee=n(7),te=function(e){Object(l.a)(n,e);var t=Object(m.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.savedToken;if(!e)return s.a.createElement(p.a,{to:"/"});this.props.getUsers(e)}},{key:"render",value:function(){return this.props.isAuth?s.a.createElement("div",null,s.a.createElement(Z,{logout:this.props.logout,savedToken:this.props.savedToken,allUsers:this.props.allUsers,currentUsers:this.props.currentUsers,filterList:this.props.filterList,saveUserInfo:this.props.saveUserInfo})):s.a.createElement(p.a,{to:"/"})}}]),n}(s.a.Component),ne=Object(ee.compose)(Object(y.b)((function(e){return{isAuth:e.auth.isAuth,savedToken:e.auth.savedToken,allUsers:e.usersPage.allUsers,currentUsers:e.usersPage.currentUsers}}),{logout:function(){return{type:"LOGOUT"}},getUsers:function(e){return function(){var t=Object(b.a)(U.a.mark((function t(n){var r;return U.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x.getUsers(e);case 2:(r=t.sent).sort((function(e,t){return e.id>t.id})),n({type:"SET-USERS",users:r});case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},filterList:function(e){return{type:"CURRENT-USERS",currentUsers:e}},saveUserInfo:function(e,t){return function(){var n=Object(b.a)(U.a.mark((function n(r){return U.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,x.saveInfo(e,t);case 2:n.sent,r(O(e.user.id));case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}}),p.f)(te),re=function(e){Object(l.a)(n,e);var t=Object(m.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){return s.a.createElement("div",{className:"container-md"},s.a.createElement(p.b,{exact:!0,path:"/"},s.a.createElement(W,null)),s.a.createElement(p.b,{path:"/users"},s.a.createElement(ne,null)))}}]),n}(s.a.Component),ae=Object(y.b)((function(e){return{isAuth:e.auth.isAuth}}),{})(re),se=function(e){return s.a.createElement(s.a.StrictMode,null,s.a.createElement(y.a,{store:X},s.a.createElement(f.a,null,s.a.createElement(ae,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(s.a.createElement(s.a.StrictMode,null,s.a.createElement(se,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},37:function(e,t,n){e.exports={loginContainer:"Login_loginContainer__1rLlp",errorSpan:"Login_errorSpan__3rOON",marginContainer:"Login_marginContainer__1xhFt"}},38:function(e,t,n){e.exports={usersContainer:"Users_usersContainer__20JEN",flexContainer:"Users_flexContainer__3WwXg",marginContainer:"Users_marginContainer__2-LaW"}},77:function(e,t,n){e.exports={userCard:"User_userCard__1B-T3",idRound:"User_idRound__1aIP7",userContainer:"User_userContainer__293be",flexContainer:"User_flexContainer__9HBiB",marginContainer:"User_marginContainer__AWMBA"}}},[[113,1,2]]]);
//# sourceMappingURL=main.a79a7a89.chunk.js.map