(this["webpackJsonptz-emphasoft"]=this["webpackJsonptz-emphasoft"]||[]).push([[0],{113:function(e,t,n){e.exports=n(240)},118:function(e,t,n){},119:function(e,t,n){},239:function(e,t){},240:function(e,t,n){"use strict";n.r(t);var r,a=n(0),s=n.n(a),o=n(48),c=n.n(o),u=(n(118),n(50)),i=n(51),l=n(54),m=n(53),p=(n(119),n(6)),f=n(49),d=n(242),h=n(241),v=n(18),E=n.n(v),g=n(30),b=n(19),U=n(109),_={allUsers:[],currentUsers:[]},C=function(e){return function(){var t=Object(g.a)(E.a.mark((function t(n){return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,j.getUserInfo(e);case 3:t.sent;case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},k=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET-USERS":return Object(b.a)(Object(b.a)({},e),{},{allUsers:t.users,currentUsers:t.users});case"CURRENT-USERS":return Object(b.a)(Object(b.a)({},e),{},{currentUsers:t.currentUsers});default:return e}},w=U.create({baseURL:"https://emphasoft-test-assignment.herokuapp.com"}),O=function(e,t){return w.post("/api-token-auth/",{username:e,password:t},{headers:{"Content-Type":"application/json"}}).then((function(e){return e.data}))},j={getUsers:function(e){return w.get("/api/v1/users/",{headers:{Authorization:"token ".concat(e)}}).then((function(e){return e.data}))}},x=n(35),N=n.n(x),S={savedToken:null,isAuth:!1},y=function(e){return{type:"AUTH-SUCCESS",token:e}},T=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"AUTH-SUCCESS":return Object(b.a)(Object(b.a)({},e),{},{savedToken:t.token,isAuth:!0});case"LOGOUT":return Object(b.a)(Object(b.a)({},e),{},{savedToken:null,isAuth:!1});default:return e}},L=n(15),A=n(31),R=n.n(A),I=n(23),P=n.n(I),B=function(e){if(!e)return"Field is required"},W=(r=50,function(e){if(e.length>r)return"Max length is ".concat(r," symbols")}),M=function(e){var t=e.input,n=e.name,r=e.meta,a=r.touched&&r.error;return s.a.createElement("div",{className:a},s.a.createElement("input",Object.assign({},t,{placeholder:n,className:"form-control "+(a?R.a.error:"")})),a&&s.a.createElement("span",{className:R.a.errorSpan},r.error))},z=Object(h.a)({form:"/login"})((function(e){var t=e.handleSubmit;return s.a.createElement("form",{onSubmit:t},s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{for:"username"},"Username"),s.a.createElement(d.a,{component:M,name:"username",placeholder:"username",validate:[B,W],defaultValue:"test_super"})),s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{for:"password"},"Password"),s.a.createElement(d.a,{component:M,name:"password",placeholder:"password",className:"form-control",validate:[B,W]})),s.a.createElement("div",null,s.a.createElement("button",{className:"btn btn-primary"},"Login")))})),D=Object(L.b)((function(e){return{isAuth:e.auth.isAuth}}),{giveToken:function(e,t){return function(){var n=Object(g.a)(E.a.mark((function n(r){var a;return E.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,O(e,t);case 2:a=n.sent,N.a.set("token",a.token,{expires:7}),a.token&&r(y(a.token));case 5:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}})((function(e){return e.isAuth?s.a.createElement(p.a,{to:"/users"}):s.a.createElement("div",{className:P()("container",R.a.loginContainer)},s.a.createElement("div",{className:P()("text-center",R.a.marginContainer)},s.a.createElement("h2",null,"\u0422\u0435\u0441\u0442\u043e\u0432\u043e\u0435 \u0437\u0430\u0434\u0430\u043d\u0438\u0435")),s.a.createElement("div",{className:R.a.marginContainer},s.a.createElement("div",null,s.a.createElement("span",null,"\u0414\u043b\u044f \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u0438 \u0432\u0432\u0435\u0434\u0438\u0442\u0435 \u0434\u0430\u043d\u043d\u044b\u0435 \u0443\u043a\u0430\u0437\u0430\u043d\u043d\u044b\u0435 \u043d\u0438\u0436\u0435")),s.a.createElement("div",null,s.a.createElement("span",null,"Username: ",s.a.createElement("b",null,"test_super"))),s.a.createElement("div",null,s.a.createElement("span",null,"Password: ",s.a.createElement("b",null,"Nf<U4f<rDbtDxAPn")))),s.a.createElement("div",null,s.a.createElement(z,{onSubmit:function(t){e.giveToken(t.username,t.password).catch((function(e){return alert("Invalid username or password")}))}})))})),F=n(243),H=n(112),J=n(7),G=J.combineReducers,q=J.createStore,V=J.applyMiddleware,X=q(G({auth:T,usersPage:k,form:F.a}),V(H.a));window.__store__=X;var $=X,K=n(78),Q=n.n(K);n(239);var Y=function(e){return s.a.createElement("li",{className:P()("list-group-item")},s.a.createElement("div",{className:Q.a.flexContainer},s.a.createElement("div",null,s.a.createElement("span",{className:Q.a.idRound},"id ".concat(e.user.id)))),s.a.createElement("div",null,s.a.createElement("b",null,"Username: ",e.user.username)),s.a.createElement("div",null,"First name: ",e.user.first_name),s.a.createElement("div",null,"Last name: ",e.user.last_name))},Z=n(39),ee=n.n(Z);var te=function(e){return s.a.createElement("div",{className:P()("container",ee.a.usersContainer)},s.a.createElement("div",{className:P()(ee.a.flexContainer,ee.a.marginContainer)},s.a.createElement("div",null,s.a.createElement("h2",null,"Users")),s.a.createElement("div",{className:ee.a.flexChild},s.a.createElement("button",{onClick:function(){e.logout()},className:"btn btn-primary"},"Logout"))),s.a.createElement("div",{className:"form-group"},s.a.createElement("input",{type:"text",onInput:function(t){var n=e.allUsers.filter((function(e){return e.username.toLowerCase().indexOf(t.currentTarget.value.toLowerCase())>-1}));e.filterList(n)},className:"form-control"})),s.a.createElement("ul",{className:"list-group"},e.currentUsers.map((function(t){return s.a.createElement(Y,{user:t,key:t.id,saveUserInfo:e.saveUserInfo,savedToken:e.savedToken})}))))},ne=n(7),re=function(e){Object(l.a)(n,e);var t=Object(m.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.savedToken;if(!e)return s.a.createElement(p.a,{to:"/"});this.props.getUsers(e)}},{key:"render",value:function(){return this.props.isAuth?s.a.createElement("div",null,s.a.createElement(te,{logout:this.props.logout,savedToken:this.props.savedToken,allUsers:this.props.allUsers,currentUsers:this.props.currentUsers,filterList:this.props.filterList,saveUserInfo:this.props.saveUserInfo})):s.a.createElement(p.a,{to:"/"})}}]),n}(s.a.Component),ae=Object(ne.compose)(Object(L.b)((function(e){return{isAuth:e.auth.isAuth,savedToken:e.auth.savedToken,allUsers:e.usersPage.allUsers,currentUsers:e.usersPage.currentUsers}}),{logout:function(){return N.a.remove("token"),{type:"LOGOUT"}},getUsers:function(e){return function(){var t=Object(g.a)(E.a.mark((function t(n){var r;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,j.getUsers(e);case 2:(r=t.sent).sort((function(e,t){return e.id>t.id?1:-1})),n({type:"SET-USERS",users:r});case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},filterList:function(e){return{type:"CURRENT-USERS",currentUsers:e}},saveUserInfo:function(e,t){return function(){var n=Object(g.a)(E.a.mark((function n(r){return E.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,j.saveInfo(e,t);case 2:n.sent,r(C(e.user.id));case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}}),p.f)(re),se=function(e){Object(l.a)(n,e);var t=Object(m.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){var e=N.a.get("token");return e&&this.props.authSuccess(e),s.a.createElement("div",{className:"container-md"},s.a.createElement(p.b,{exact:!0,path:"/"},s.a.createElement(D,null)),s.a.createElement(p.b,{path:"/users"},s.a.createElement(ae,null)))}}]),n}(s.a.Component),oe=Object(L.b)((function(e){return{isAuth:e.auth.isAuth}}),{authSuccess:y})(se),ce=function(e){return s.a.createElement(L.a,{store:$},s.a.createElement(f.a,null,s.a.createElement(oe,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(s.a.createElement(s.a.StrictMode,null,s.a.createElement(ce,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},31:function(e,t,n){e.exports={loginContainer:"Login_loginContainer__1rLlp",errorSpan:"Login_errorSpan__3rOON",error:"Login_error__boyWw",marginContainer:"Login_marginContainer__1xhFt"}},39:function(e,t,n){e.exports={usersContainer:"Users_usersContainer__20JEN",flexContainer:"Users_flexContainer__3WwXg",marginContainer:"Users_marginContainer__2-LaW"}},78:function(e,t,n){e.exports={userCard:"User_userCard__1B-T3",idRound:"User_idRound__1aIP7",userContainer:"User_userContainer__293be",flexContainer:"User_flexContainer__9HBiB",marginContainer:"User_marginContainer__AWMBA"}}},[[113,1,2]]]);
//# sourceMappingURL=main.cd3a2c61.chunk.js.map